<h2 mat-dialog-title>Export Diagram</h2>

<mat-dialog-content>
  <mat-tab-group>
    <!-- PNG Export Tab -->
    <mat-tab label="PNG">
      <div class="tab-content">
        <p>Export your diagram as a PNG image.</p>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>File Name</mat-label>
          <input matInput [(ngModel)]="pngSettings().fileName">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Width (px)</mat-label>
          <input matInput type="number" [(ngModel)]="pngSettings().width" min="100" max="5000">
          <mat-hint>The height will be calculated automatically</mat-hint>
        </mat-form-field>

        <div class="field-row">
          <label>Scale Quality:</label>
          <mat-slider
            min="1"
            max="4"
            step="0.5"
            [displayWith]="formatScale"
            class="full-width">
            <input matSliderThumb [(ngModel)]="pngSettings().scale">
          </mat-slider>
        </div>

        <mat-checkbox [(ngModel)]="pngSettings().transparentBackground">
          Transparent Background
        </mat-checkbox>

        <button mat-raised-button color="primary" (click)="exportAsPng()" class="export-button">
          <mat-icon>download</mat-icon>
          Export PNG
        </button>
      </div>
    </mat-tab>

    <!-- SVG Export Tab -->
    <mat-tab label="SVG">
      <div class="tab-content">
        <p>Export your diagram as an SVG vector image.</p>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>File Name</mat-label>
          <input matInput [(ngModel)]="svgSettings().fileName">
        </mat-form-field>

        <mat-checkbox [(ngModel)]="svgSettings().includeFonts">
          Include Fonts (for better compatibility)
        </mat-checkbox>

        <button mat-raised-button color="primary" (click)="exportAsSvg()" class="export-button">
          <mat-icon>download</mat-icon>
          Export SVG
        </button>
      </div>
    </mat-tab>

    <!-- URL Export Tab -->
    <mat-tab label="URL">
      <div class="tab-content">
        <p>Generate a shareable URL for your diagram.</p>

        <mat-checkbox [(ngModel)]="urlSettings().includeState">
          Include Editor State
        </mat-checkbox>

        <mat-checkbox [(ngModel)]="urlSettings().includeTheme">
          Include Theme Settings
        </mat-checkbox>

        <button mat-raised-button color="primary" (click)="shareUrl()" class="export-button">
          <mat-icon>content_copy</mat-icon>
          Copy Shareable URL
        </button>
      </div>
    </mat-tab>
  </mat-tab-group>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Cancel</button>
</mat-dialog-actions>
